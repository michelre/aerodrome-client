<script type="text/html" id="payment-pilot-template">
<section id="contenu">
<div id="payment-atterissage">
<div class="container-fluid">
    <ul class="my-breadcrumb">
        <li><a href="#"><i data-bind="css: currentStepAtterissageClass"></i><span>1. Atterissage</span></a></li>
        <li><a href="#"><i data-bind="css: currentStepAvionClass"></i><span>2. Avion</span></a></li>
        <li><a href="#"><i data-bind="css: currentStepServicesClass"></i><span>3. Services</span></a></li>
        <li><a href="#"><i data-bind="css: currentStepValidationClass"></i><span>5. Validation</span></a></li>
        <li><a href="#"><i data-bind="css: currentStepPaiementClass"></i><span>6. Paiement</span></a></li>
    </ul>
</div>

<div class="content container-fluid" data-bind="if: currentStep() === 'atterissage' ">
    <h2>Saisissez votre atterissage</h2>

    <p class="error bg-danger" data-bind="css: displayErrorLanding">Veuillez renseigner tous les champs</p>

    <form class="form-horizontal airbase-city" role="form">
        <div class="form-group">
            <label class="col-md-2" for="airbase-input">Aérodrome:</label>

            <div class="col-md-3 autocomplete">
                <input id="airbase-input" class="form-control" placeholder="Annecy, Paris, 38420..." type="text"
                       data-bind="value: airbaseInput, autocompleteAirbase: airbasesJSON"/>
            </div>
            <!-- ko if: landing && landing().airbase -->
            <div class="col-md-3 col-md-offset-1 selected-airbase" data-bind="with: landing().airbase">
                <div data-bind="text: name"></div>
                <div data-bind="text: address"></div>
            </div>
            <!-- /ko -->
        </div>
        <!-- ko with: landing -->
        <div class="form-group">
            <label for="date-landing" class="col-md-2">Date:</label>

            <div class="col-md-3">
                <input id="date-landing" placeholder="19/03/2014, 21/08/2013" class="form-control" type="date" data-bind="value: date">
            </div>
        </div>
        <div class="form-group">
            <label for="hour-landing" class="col-md-2">Heure:</label>

            <div class="col-md-3">
                <input id="hour-landing" placeholder="10:12, 12:08" class="form-control" type="time" data-bind="value: hour">
            </div>
        </div>
        <!-- /ko -->
        <div class="form-group">
            <div class="col-md-offset-10 col-md-2">
                <button class="btn btn-primary next-step" data-bind="click: nextStepLandingButton">Etape suivante
                </button>
            </div>
        </div>
    </form>
</div>

<div class="content plane container-fluid" data-bind="if: currentStep() === 'avion' ">
    <h2>Votre avion</h2>

    <div class="error bg-danger" data-bind="css: displayErrorPlane">
        Veuillez renseigner tous les champs
    </div>

    <form class="form-horizontal" role="form">
        <!-- ko with: plane -->
        <div class="form-group">
            <label for="immat-plane" class="col-md-2">Immatriculation:</label>

            <div class="col-md-2">
                <input id="immat-plane" class="form-control" type="text" data-bind="value: immat"
                       placeholder="AA-999-00...">
            </div>
        </div>
        <div class="form-group">
            <label for="weight-plane" class="col-md-2">Tonnage (tonne):</label>

            <div class="col-md-2">
                <input id="weight-plane" class="form-control" type="number" data-bind="value: weight"
                       placeholder="6.1, 3.6...">
            </div>
        </div>
        <!-- /ko -->
        <div class="form-group">
            <div class="col-md-2 col-md-push-10">
                <button class="btn btn-primary next-step" data-bind="click: nextStepPlaneButton">Etape suivante</button>
            </div>
            <div class="col-md-2 col-md-pull-2">
                <button class="btn btn-primary next-step" data-bind="click: previousStepPlaneButton">Etape précédente
                </button>
            </div>
        </div>
    </form>
</div>

<div class="content services container-fluid" data-bind="if: currentStep() === 'services' ">
    <h2>Vos Services</h2>

    <div class="row service-type-selected">
        <div class="col-md-offset-5 btn-group">
            <button type="button" value="forfait" class="btn btn-default"
                    data-bind="click: changeSelectedServiceType, css: { active: selectedServiceType() === 'forfait' }">
                Forfait
            </button>
            <button type="button" value="tonnage" class="btn btn-default"
                    data-bind="click: changeSelectedServiceType, css: { active: selectedServiceType() === 'tonnage' }">
                Tonnage
            </button>
        </div>
    </div>

    <!-- ko if: selectedServiceType() === 'forfait' -->
    <table class="table table-striped table-hover">
        <thead>
        <tr>
            <th>Nom</th>
            <th>Description</th>
            <th>Prix</th>
            <th></th>
        </tr>
        </thead>
        <tbody data-bind="foreach: servicesForfait">
        <tr>
            <td data-bind="text: name"></td>
            <td data-bind="text: desc"></td>
            <td data-bind="text: price"></td>
            <td><input type="checkbox" data-bind="checkedValue: $data, checked: $parent.servicesForfaitSelected"/></td>
        </tr>
        </tbody>
    </table>
    <!-- /ko -->

    <!-- ko if: selectedServiceType() === 'tonnage' -->
    <table class="table table-striped table-hover">
        <thead>
        <tr>
            <th>Nom</th>
            <th>Description</th>
            <th>Prix</th>
            <th></th>
        </tr>
        </thead>
        <tbody data-bind="foreach: servicesTonnage">
        <tr>
            <td data-bind="text: name"></td>
            <td data-bind="text: desc"></td>
            <td data-bind="text: price"></td>
            <td><input type="checkbox" data-bind="checkedValue: $data, checked: $parent.servicesTonnageSelected"/></td>
        </tr>
        </tbody>
    </table>

    <!-- /ko -->
    <div class="row total">
        <div class="col-md-offset-10 col-md-2">
            <span>Prix total:</span>
            <b data-bind="text: totalEuros"></b>
        </div>
    </div>
    <div class="row">
        <div class="col-md-offset-0 col-md-2">
            <button class="btn btn-primary next-step" data-bind="click: previousStepServicesButton">Etape précédente
            </button>
        </div>
        <div class="col-md-offset-8 col-md-2">
            <button class="btn btn-primary next-step" data-bind="click: nextStepServicesButton">Etape suivante</button>
        </div>
    </div>
</div>

<div class="content validation container-fluid" data-bind="if: currentStep() === 'validation' ">
    <h2>Validation</h2>

    <div class="row">
        <div class="col-md-5 border">
            <h3>Votre atterissage</h3>
            <!-- ko with: landing -->
            <div class="form-horizontal" role="form">
                <!-- ko with: airbase -->
                <div class="form-group">
                    <label class="col-md-3">Aérodrome:</label>

                    <div class="col-md-9">
                        <span data-bind="text: fullTextSearch"></span>
                    </div>
                </div>
                <!-- /ko -->
                <div class="form-group">
                    <label class="col-md-3">Date:</label>

                    <div class="col-md-9">
                        <span data-bind="text: dateFormat"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3">Heure:</label>

                    <div class="col-md-9">
                        <span data-bind="text: hour"></span>
                    </div>
                </div>
            </div>
            <!-- /ko -->
        </div>
        <div class="col-md-offset-2 col-md-5 border">
            <h3>Votre avion</h3>

            <div class="form-horizontal" role="form">
                <!-- ko with: plane -->
                <div class="form-group">
                    <label class="col-md-3">Immatriculation:</label>

                    <div class="col-md-9">
                        <span data-bind="text: immat"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3">Tonnage:</label>

                    <div class="col-md-9">
                        <span data-bind="text: weight"></span>
                    </div>
                </div>
                <!-- /ko -->
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12 border">
            <div class="row services-title">
                <div class="col-md-5">
                    <h3>Vos services</h3>
                </div>
                <div class="col-md-offset-2 col-md-5">
                    <h5>Cout total: <span data-bind="text: totalEuros"></span></h5>
                </div>
            </div>

            <h4>Forfait</h4>
            <table class="table table-bordered table-striped">
                <thead>
                <tr>
                    <td>Nom</td>
                    <td>Description</td>
                    <td>Prix</td>
                </tr>
                </thead>
                <tbody data-bind="foreach: servicesForfaitSelected">
                <tr>
                    <td data-bind="text: name"></td>
                    <td data-bind="text: desc"></td>
                    <td data-bind="text: price"></td>
                </tr>
                </tbody>
                <tfoot>
                <tr>
                    <td>Total</td>
                    <td></td>
                    <td data-bind="text: totalForfait"></td>
                </tr>
                </tfoot>
            </table>

            <h4>Tonnage</h4>
            <table class="table table-bordered table-striped">
                <thead>
                <tr>
                    <td>Nom</td>
                    <td>Description</td>
                    <td>Prix</td>
                </tr>
                </thead>
                <tbody data-bind="foreach: servicesTonnageSelected">
                <tr>
                    <td data-bind="text: name"></td>
                    <td data-bind="text: desc"></td>
                    <td data-bind="text: price"></td>
                </tr>
                </tbody>
                <tfoot>
                <tr>
                    <td>Total</td>
                    <td></td>
                    <td data-bind="text: totalTonnage"></td>
                </tr>
                </tfoot>
            </table>
        </div>
    </div>

    <div class="row">
        <div class="col-md-2">
            <button class="btn btn-primary next-step" data-bind="click: previousStepValidationButton">Etape
                précédente
            </button>
        </div>
        <div class="col-md-offset-8 col-md-2">
            <button class="btn btn-primary next-step" data-bind="click: nextStepValidationButton">Etape suivante
            </button>
        </div>
    </div>
</div>

<div class="content validation container-fluid" data-bind="if: currentStep() === 'paiement' ">
    <h2>Paiement</h2>

    <div class="form-horizontal" role="form">
        <div class="form-group">
            <label class="col-md-2">Total à payer:</label>

            <div class="col-md-3">
                <i data-bind="text: totalEuros"></i>
            </div>
        </div>
        <div class="form-group">
            <label class="col-md-2">Votre crédit:</label>

            <div class="col-md-3">
                <i data-bind="text: pilot().creditEuros()"></i>
            </div>
        </div>
    </div>


    <div class="credit-low bg-danger container" data-bind="css: notEnoughCreditClass">
        <div class="row">
            <p class="col-md-12">Vous ne disposez pas d'un crédit suffisant</p>
        </div>
        <hr/>
        <form class="form-horizontal" role="form">
            <div class="form-group">
                <label class="col-md-1">CB</label>
                <div class="col-md-1">
                    <input type="radio" value="cb" data-bind="checked: paymentType"/>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-1">Paypal</label>
                <div class="col-md-1">
                    <input type="radio" value="paypal" data-bind="checked: paymentType"/>
                </div>
            </div>
        </form>

        <!-- ko if: paymentType() === 'paypal' -->
        <form class="form-horizontal" role="form">
            <label for="credit-sum" class="col-md-2">Somme à créditer:</label>
            <div class="col-md-3">
                <input id="credit-sum" class="form-control" type="number"/>
            </div>
            <div class="col-md-3">
                <button class="btn btn-default">Créditer</button>
            </div>
        </form>
        <!-- /ko -->
    </div>

    <p class="credit-ok bg-success" data-bind="css: enoughCreditClass">Votre nouveau crédit sera: <b
            data-bind="text: futureCredit"></b></p>

    <div class="row">
        <div class="col-md-1">
            <button class="btn btn-primary next-step" data-bind="click: previousStepPaiementButton">Etape
                précédente
            </button>
        </div>
        <div class="col-md-offset-10 col-md-1">
            <button class="btn btn-success next-step"
                    data-bind="click: payButton, attr: { disabled: !enoughCredit() || total() === 0 }">Payer
            </button>
        </div>
    </div>
</div>
</div>
</section>
</div>
</script>